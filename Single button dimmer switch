blueprint:
  name: Single button dimmer switch
  description: Swith a light on/off, dim up/down by holding.
  domain: automation
  input:
    button:
      name: Button
      description:
        Momentary push button
      selector:
        entity:
          domain: sensor
    light:
      name: Light
      selector:
        entity:
          domain: light
    brightness_threshold:
      name: Brightness threshold
      description: If the light brightness is above this value,
        the light is going to dim down when holding the button.
      default: "130"
      selector:
        number:
          min: "0"
          max: "255"
    brightness_step_pct:
      name: Brightness step
      description: Percentage brightness increase/decrease in each transition step.
      default: "20"
      selector:
        number:
          min: "1"
          max: "100"
          unit_of_measurement: "%"
    transition_step_length:
      name: Transition step lenght
      description: Length of each transition step.
      default: "0.1"
      selector:
        number:
          min: "0"
          max: "5"
          step: "0.01"
          unit_of_measurement: s

mode: single

trigger:
  - platform: state
    entity_id: !input button
    to: "single"

action:
    # when trigger came (button has been released within timeout)
    default:
      - service: light.toggle
        entity_id: !input light
